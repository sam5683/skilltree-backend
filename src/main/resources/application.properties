# -----------------------------------------
# Server (Java 21 Virtual Threads — good)
# -----------------------------------------
server.port=8080
spring.threads.virtual.enabled=true

# -----------------------------------------
# MongoDB (Production-safe config)
# -----------------------------------------
spring.data.mongodb.uri=mongodb+srv://sameerkaushal35:skilltree123!@cluster0.ll7htnu.mongodb.net/skilltree?retryWrites=true&w=majority&appName=Cluster0
spring.data.mongodb.database=skilltree
spring.data.mongodb.auto-index-creation=true

# -----------------------------------------
# Jackson JSON config
# -----------------------------------------
spring.jackson.default-property-inclusion=non_null
spring.jackson.serialization.indent-output=true

# -----------------------------------------
# Spring Security fallback user
# (DO NOT USE in production)
# -----------------------------------------
spring.security.user.name=admin
spring.security.user.password=${ADMIN_PASS:admin123}

# -----------------------------------------
# Caching (Caffeine — correct)
# -----------------------------------------
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=500,expireAfterWrite=5m

# -----------------------------------------
# Actuator (Monitoring)
# -----------------------------------------
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized  # Shows DB details only if auth (avoids 500 crash)
management.health.mongo.enabled=false  # Disable Mongo probe (dev temp – avoids 500 on health)
management.info.env.enabled=true

# -----------------------------------------
# Logging
# -----------------------------------------
logging.level.org.springframework.data.mongodb.core.MongoTemplate=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.com.skilltree=INFO
logging.level.org.springframework.boot.actuate=DEBUG
logging.level.org.springframework.boot.actuate.health=DEBUG

# -----------------------------------------
# DevTools
# -----------------------------------------
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true